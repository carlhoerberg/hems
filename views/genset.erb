# TYPE genset_voltage gauge
# TYPE genset_current gauge
# TYPE genset_kva gauge
# TYPE genset_kw gauge
# TYPE genset_pf gauge
<%[1, 2, 3].each do |l|%>
genset_voltage{L="<%=l%>"} <%=measurements["voltage_l#{l}_n".to_sym]%>
genset_current{L="<%=l%>"} <%=measurements["current_l#{l}".to_sym]%>
genset_kva{L="<%=l%>"} <%=measurements["kva_l#{l}".to_sym]%>
genset_kw{L="<%=l%>"} <%=measurements["kw_l#{l}".to_sym]%>
genset_pf{L="<%=l%>"} <%=measurements["pf_l#{l}".to_sym]%>
<%end%>

# TYPE genset_frequency gauge
genset_frequency <%=measurements[:frequency]%>
# TYPE genset_rpm gauge
genset_rpm <%=measurements[:rpm]%>
# TYPE genset_battery_voltage gauge
genset_battery_voltage <%=measurements[:battery_voltage]%>
# TYPE genset_fuel_level gauge
genset_fuel_level <%=measurements[:fuel_level]%>
# TYPE genset_coolant_temperature gauge
genset_coolant_temperature <%=measurements[:coolant_temperature]%>
# TYPE genset_kwh counter
genset_kwh <%=measurements[:kWh]%>
# TYPE genset_start_counter counter
genset_start_counter <%=measurements[:start_counter]%>
# TYPE genset_hours counter
genset_hours <%=measurements[:hours]%>
# TYPE genset_binary_output gauge
genset_binary_output <%=measurements[:binary_output]%>
# TYPE genset_status gauge
genset_status <%=status%>

# TYPE metrics_gather_time gauge
metrics_gather_time{device="genset"} <%=Process.clock_gettime(Process::CLOCK_MONOTONIC) - t%>
